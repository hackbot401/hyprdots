# ============================================================================
# üèóÔ∏è exec-once (startup events) {{{
exec-once=dunst
exec-once=/usr/lib/polkit-kde-authentication-agent-1
exec-once=import-gsettings
exec-once=hyprstart

# eww scripts
$eww_dir=~/dotfiles/config/eww/bin
exec-once=$eww_dir/create_temp_files
exec-once=$eww_dir/music_info get_json
exec-once=$eww_dir/workspaces
# }}}

# ============================================================================

# ‚öôÔ∏è  settings {{{

# monitor=,preferred,auto,1
monitor=eDP-1,1920x1080@144,0x0,1

# https://wiki.hyprland.org/Configuring/Variables/

general {
    border_size=3
    gaps_in=13
    gaps_out=85
    col.active_border=rgba(f2a170ee)
    col.inactive_border=rgb(7492ef)
    layout=master
    resize_on_border=false
}

decoration {
    rounding=16
    active_opacity=0.98
    inactive_opacity=0.9
    fullscreen_opacity=1
    drop_shadow=true
    shadow_range=40
    shadow_render_power=4
    shadow_ignore_window=true
    col.shadow=rgba(e56b2c32)
    col.shadow_inactive=rgba(4a6be342)
    shadow_offset=0 0
}

animations {
    enabled=1
    bezier=jerk,1, -0.36, 0.72, 1.2
    bezier=snap,0,0.25,0.5,1.6
    animation=windows,1,3,snap,popin
    animation=workspaces,1,3,jerk,slide
}

input {
    repeat_rate=42
    repeat_delay=324
    follow_mouse=1
    sensitivity=1
    float_switch_override_focus=0
}

dwindle {
    pseudotile=false
    force_split=2
    preserve_split=true
}

master {
    new_is_master = false
}

# }}}


# ü™ü window rules {{{

# misc default rules
windowrule=workspace 1 silent,discord
windowrule=workspace 5 silent,^(Spotify)$
windowrule=float,^(Spotify)$
windowrule=float,imv
windowrule=float,mpv
windowrule=float,zoom
windowrule=float,zathura
windowrule=size 1000 1475,zathura
windowrule=center,zathura

# center float (terminals)
$terminalfloat=title:(terminalfloat)
windowrule=float,$terminalfloat
windowrule=size 2695 1610,$terminalfloat
windowrule=move 327 275,$terminalfloat
windowrule=opacity 1,$terminalfloat
windowrule=dimaround,$terminalfloat

# glava
$glava=title:^(GLava)$
windowrule=noborder,$glava
windowrule=nofocus,$glava
windowrule=noshadow,$glava
windowrule=float,$glava
windowrule=pin,$glava

# center float (stubborn popup select windows? need to do this better)
$centerfloat=title:^(File)$|^(Settings)$|^(Authentication)$
windowrule=float,$centerfloat
windowrule=size 1000 800,$centerfloat
windowrule=center,$centerfloat
windowrule=dimaround,$centerfloat

# Send to float (wish there was a set float only option, toggle can be problematic)
$mini_size=594 337
$mini_pos=3226 910
$medium_size=660 563
$medium_pos=3153 209
$large_size=2692 1610
$large_pos=327 275

$small_float=hyprctl dispatch togglefloating 0; hyprctl dispatch resizeactive exact $mini_size; hyprctl dispatch moveactive exact $mini_pos
$medium_float=hyprctl dispatch togglefloating 0; hyprctl dispatch resizeactive exact $medium_size; hyprctl dispatch moveactive exact $medium_pos
$large_float=hyprctl dispatch togglefloating 0; hyprctl dispatch resizeactive exact $large_size; hyprctl dispatch moveactive exact $large_pos

$minifloat=hyprctl dispatch moveactive exact $mini_pos; hyprctl dispatch resizeactive exact $mini_size
$mediumfloat=hyprctl dispatch moveactive exact $medium_pos; hyprctl dispatch resizeactive exact $medium_size
$largefloat=hyprctl dispatch moveactive exact $large_pos; hyprctl dispatch resizeactive exact $large_size

# guvcview (webcam)
windowrule=float,guvcview
windowrule=size $mini_size,guvcview
windowrule=move $mini_pos,guvcview
windowrule=rounding 69,guvcview
windowrule=opacity 0.8,guvcview
windowrule=nofocus,guvcview

# }}}

# üïπÔ∏è binds {{

# basic commands
bind=SUPER,X,killactive,
bind=SUPERSHIFT,X,exec,hyprctl kill
bind=SUPER,A,exec,hyprctl dispatch fullscreen 1

# 272<-left Û∞çΩ right->273
bindm=SUPERSHIFTCTRL,mouse:272,movewindow
bindm=SUPERSHIFTCTRL,mouse:273,resizewindow

# window controls
bind=SUPERSHIFT,O,toggleopaque
bind=SHIFTCTRL,S,exec,$smallfloat
bind=SHIFTCTRL,M,exec,$mediumfloat
bind=SHIFTCTRL,L,exec,$largefloat
bind=SUPERSHIFTCTRL,T,togglefloating
bind=SUPERSHIFTCTRL,S,exec,$small_float
bind=SUPERSHIFTCTRL,M,exec,$medium_float
bind=SUPERSHIFTCTRL,L,exec,$large_float

# various common applications
$browser = firefox-developer-edition
bind=SUPER,RETURN,exec,kitty --session ~/.config/kitty/sessions/term.conf
bind=SUPER,F,exec,$browser
bind=SUPERSHIFT,l,exec,lock
bind=SUPERSHIFT,E,exec,microsoft-edge-dev
bind=ALTSUPERSHIFT,F,exec,$browser; sleep 0.4; $float
bind=SUPERSHIFT,Z,exec,zathura
bind=SUPERSHIFT,C,exec,$browser https://calendar.google.com/calendar/u/0/r
bind=SUPER,R,exec,wofi --show drun
bind=SUPER,M,exec,wofi-emoji
bind=SUPERSHIFTCTRL,Y,exec,pkill guvcview
bind=SUPER,Y,exec,pkill guvcview; guvcview & disown

# glava (music visulizer)
# bind=SUPERSHIFTCTRL,L,exec,glava -e "radial_rc.glsl"
# bind=SUPERSHIFTCTRL,H,exec,glava -e "bars_rc.glsl"
# bind=SUPERSHIFTCTRL,M,exec,pkill glava

# center float terminals
$termfloat = kitty --title="terminalfloat"
bind=SUPERSHIFT,RETURN,exec,$termfloat --session "~/.config/kitty/sessions/term.conf"
bind=SUPERSHIFT,P,exec,$termfloat -e "pulsemixer"
bind=SUPERSHIFT,R,exec,$termfloat -e "btop"
bind=SUPERSHIFT,G,exec,$termfloat --working-directory="dotfiles" -e "lazygit"
bind=SUPERSHIFT,Y,exec,$termfloat --working-directory="dabella" -e "lazygit"

# re-size windows
$master_big=hyprctl dispatch resizeactive exact 1866 1955
$master_norm=hyprctl dispatch resizeactive exact 1111 1955
bind=ALT,Q,exec,$master_big
bind=ALT,W,exec,$master_big;$master_norm;$master_norm;$master_norm;$master_norm;$master_norm;
bind=ALT,F,resizeactive,exact 1870 1186
bind=ALTSHIFTCTRL,S,exec, hyprctl dispatch moveactive exact 2361 147; hyprctl dispatch resizeactive exact 1301 1000;
# spotify preferred window ‚Æ≠

# move focus within workspace
bind=ALT,s,movefocus,l
bind=ALT,t,movefocus,r
bind=ALT,r,movefocus,u
bind=ALT,e,movefocus,d
bind=ALT,g,cyclenext,prev

# move window within workspace
bind=ALTSUPER,Left,movewindow,l
bind=ALTSUPER,Right,movewindow,r
bind=ALTSUPER,Up,movewindow,u
bind=ALTSUPER,Down,movewindow,d

# move to workspace
$move_workspace=hyprctl dispatch workspace
bind=SUPER,1,exec, $move_workspace 1; change-bg
bind=SUPER,2,exec, $move_workspace 2; change-bg
bind=SUPER,3,exec, $move_workspace 3; change-bg
bind=SUPER,4,exec, $move_workspace 4; change-bg
bind=SUPER,5,exec,change-bg "music"; $move_workspace 5

# open workspace layout
bind=ALTSUPER,s,exec, layout -n 1
bind=ALTSUPER,e,exec, layout -n 2
bind=ALTSUPER,t,exec, layout -n 3
bind=ALTSUPER,d,exec, layout -n 4

# media controls
$player = playerctl --player=spotify
bind=SUPERSHIFT,F,exec,$player play-pause
bind=SUPERSHIFT,COMMA,exec,$player next
bind=SUPERSHIFT,D,exec,$player previous

# headphones controls
bind=,208,exec,$player play-pause
bind=,171,exec,$player next
bind=,173,exec,$player previous

# simple color picker
bind=SHIFTSUPER,S,exec,hyprpicker | wl-copy

# screenshots
bind=CTRLSHIFTSUPER,B,exec,grim -g "$(slurp)" - | wl-copy && dunstify "screenshot saved to clipboard" -u low -a "grim"
bind=CTRLSHIFTSUPER,C,exec,grim -g "$(slurp)" ~/media/screenshots/$(date +%F__%T__slurp).png && dunstify "screenshot saved to folder" -a "grim"

# videos
bind=CTRLSHIFTSUPER,V,exec,record -a none & disown
# bind=CTRLSHIFTSUPERALT,V,exec,record -a none & disown
# bind=CTRLSHIFTSUPER,U,exec,record -s slurp & disown
bind=CTRLSHIFTSUPER,U,exec,record -s slurp -a none & disown
bind=CTRLSHIFTSUPER,O,exec,pkill -SIGINT record

# mainim preview
bind=SHIFTSUPERALT,M,exec,manim -p ~/cogikyo/diatomi/main.py

# }}}
